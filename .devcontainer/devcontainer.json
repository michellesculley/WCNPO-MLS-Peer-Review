// SS3 Developer Codespace
// This codespace contains R and a port for an Rstudio server in case 
// that is the preferred IDE over VSCode.
// R packages commonly used with SS3 are also installed (see install.r).
{
	"name": "R (rocker/tidyverse)",
   	"image": "ghcr.io/rocker-org/devcontainer/tidyverse:4.3",

	"features": {
		"ghcr.io/rocker-org/devcontainer-features/quarto-cli:1": {},
	    	"ghcr.io/rocker-org/devcontainer-features/r-packages:1": {
			"packages": "data.table,magrittr,ggplot2,reshape2,parallelly,future,shiny,shinydashboard,shinyWidgets,markdown,viridis,ggthemes,funtimes,randtests,lmtest,DT,truncnorm,readxl,quarto,googlesheets4,tidyr,dplyr,tibble,stringr",
			"installSystemRequirements": true
		}
	},
	"customizations": {
	  "vscode": {
		  "settings": {
			"r.rterm.linux": "/usr/local/bin/radian",
			"r.bracketedPaste": true,
			"r.plot.useHttpgd": true,
    		"r.lsp.diagnostics": false,
    		"workbench.settings.applyToAllProfiles": [
        	"r.lsp.diagnostics"
    		],
			"[r]": {
			  "editor.wordSeparators": "`~!@#%$^&*()-=+[{]}\\|;:'\",<>/?"
			}
		  },
		  "extensions":[
			"GitHub.codespaces",
			"hbenl.vscode-test-explorer",
			"reditorsupport.r",
			"rdebugger.r-debugger",
			"ms-vsliveshare.vsliveshare",
			"mathematic.vscode-pdf",
			"ms-vscode.live-server"
		]
	  }
	},
	  "forwardPorts": [3000,8787,8888],
	  "portsAttributes": {
		"3000": {
			"label": "HTML",
			"requireLocalPort": true,
			"onAutoForward": "ignore"
		},
		"8787": {
			"label": "Rstudio",
			"requireLocalPort": true,
			"onAutoForward": "ignore"
		},
		"8888": {
			"label": "Shiny",
			"requireLocalPort": true,
			"onAutoForward": "ignore"
		}
	  },		  
	  // Use 'postCreateCommand' to run commands after the container is created.
	  "postCreateCommand": "Rscript .devcontainer/install.r",
	  "postAttachCommand": "sudo rstudio-server start",
	  "postCreateCommand": "sudo chmod a+x Model-Runs/Template_files/'one sex'/ss_opt_linux && sudo chmod a+x Model-Runs/Template_files/'two sex'/ss_opt_linux",
	  "remoteUser": "rstudio"
	
}
